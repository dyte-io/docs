# Media Preview

Before joining a meeting, users may want to preview and configure their media devices like camera, microphone, and audio output.
This section provides developers with the tools to prepare the media environment before joining a Dyte meeting.

If you are using our UI Kits, this functionality can be handled by `DyteSetupFragment` or built with `DyteParticipantTileView` 
and `DyteSettingsFragment` components.


## Properties

- `audioEnabled`: A <span className="tag-orange">boolean</span> value indicating if the audio currently enabled.
- `videoEnabled`: A <span className="tag-orange">boolean</span> value indicating if the video currently enabled.

## Methods

### Toggling Media

The same methods used for controlling media during a meeting are also applicable for pre-call media configuration.

**1. Mute/Unmute microphone**

```kotlin
// Mute Audio
meeting.localUser.disableAudio()

// Unmute Audio
meeting.localUser.enableAudio()
```

```mermaid
flowchart LR
    classDef basic fill:white;

    eam("enableAudio()") --> success("Gives <code>onAudioUpdate</code> callback to <code>DyteSelfEventsListener</code>")

    class eam basic;
```

<br />

Anytime there is an update in the audio state of the local user, the Core SDK notifies the client through the `onAudioUpdate` callback 
from `DyteSelfEventsListener`. Here's how you can register the listener:

```kotlin
meeting.addSelfEventsListener(object : DyteSelfEventsListener {
    override fun onAudioUpdate(audioEnabled: Boolean) {
        // Show a visual preview of the audio to the user if enabled
    }
})
```

**2. Enable/Disable camera**

```kotlin
// Disable Video
meeting.localUser.disableVideo()

// Enable Video
meeting.localUser.enableVideo()
```

```mermaid
flowchart LR
    classDef basic fill:white;

    eam("enableVideo()") --> success("Gives <code>onVideoUpdate</code> callback to <code>DyteSelfEventsListener</code>")

    class eam basic;
```
<br />

Whenever there is an update in the video state of the local user, the Core SDK notifies the client through the `onVideoUpdate` callback 
from `DyteSelfEventsListener`. Here's how you can register the listener:

```kotlin
meeting.addSelfEventsListener(object : DyteSelfEventsListener {
    override fun onVideoUpdate(videoEnabled: Boolean) {
        // Show local user's VideoView if video is enabled
    }
})
```

### Changing Media Device

Media devices represent the hardware for the camera, microphone, and speaker devices. To get the list of media devices currently 
available, use the following methods:

```kotlin
// Get all audio devices
const audioDevices = meeting.localUser.getAudioDevices()

// Get all video devices
const videoDevices = meeting.localUser.getVideoDevices()
```

To get the currently selected media device, use the following methods:

```kotlin
// Get current audio device being used
const currentAudioDevice = meeting.localUser.getSelectedAudioDevice()

// Get current video device being used
const currentVideoDevice = meeting.localUser.getSelectedVideoDevice()
```

Use these methods to create a UI that allows users to configure their media devices. When the user selects a device, use the below methods to set the device.

**Set device**

```kotlin
// Set audio device
meeting.localUser.setAudioDevice(device)
// eg. device = audioDevices[0]

// Set video device
meeting.localUser.setVideoDevice(device)
// eg. device = videoDevices[0]
```
